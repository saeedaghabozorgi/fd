<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1"/>
<script src="js/jquery.js"></script>
  <script src="js/raphael-2.1.4.min.js"></script>
  <script src="js/justgage.js"></script>
<style>
    .container {
      width: 320px;
      margin: 30px auto 0 auto;
      text-align: center;
    }

    .gauge {
      width: 320px;
      height: 320px;
    }

    .btn {
      margin: 30px 5px 0 2px;
      padding: 15px 20px;
    }
  
      #confirm {
         display: none;
         background-color: #514E61;
         color: #FCD116;
         border: 1px solid #aaa;
         position: fixed;
         width: 250px;
         left: 50%;
         margin-left: -100px;
         padding: 6px 8px 8px;
         box-sizing: border-box;
         text-align: center;
      }

      #confirm .message {
         text-align: left;
      }
      </style>
<script>
    

    
</script>
</head>

<body>
  <div class="container">
    <div id="gg1" class="gauge" data-value="50" data-min="0" data-max="100" data-gaugeWidthScale="0.6"></div>
    
  </div>


    <div id="confirm">
         <div class="message">This might be a fradulant transaction.</div>
    </div>
    <form id="contact-form" method="post">
         <h4>Features:</h4>
         
        <textarea id="features-input" rows="3" placeholder="Enter your messageâ€¦" class="form-control" style="width:100%;">0,-0.32333357234920695,1.05745524547602,-0.0483411518056082,-0.607204308469926,1.25982114985563,-0.0917607168463734,1.15910149881154,-0.12433460579324301,-0.174639536425237,-1.6444006451833897,-1.11886302116203,0.202647309859633,1.14596494837297,-1.80235955648842,-0.24717793192731197,-0.0609453515056588,0.846605737903167,0.379454386602278,0.8472622447749741,0.186409421250743,-0.20709826694548397,-0.43389027235615096,-0.261613282942462,-0.0466506062633096,0.211512300497807,0.00829721213659597,0.108494430085674,0.161139166913704,-0.19330594520930533</textarea><br/>
        <div class="g-recaptcha" data-sitekey="6Lc7cVMUAAAAAM1yxf64wrmO8gvi8A1oQ_ead1ys" class="form-control" style="width:100%;"></div>
        <button type="button" id="gg1_refresh2" onClick="submitToAPI(event)" class="btn btn-lg" style="margin-top:20px;">Submit</button>
        <button type="button" id="gg1_refresh3" onClick="fillit(event)" class="btn btn-lg" style="margin-top:20px;">random</button>
  </form>

  <p id="label"></p>
  <p id="score"></p>
<script>
    var gg1 = new JustGage({
        id: "gg1",
        formatNumber: true,
        counter: true
      });

    // document.getElementById('gg1_refresh2').addEventListener('click', function() {
    //         gg1.refresh(getRandomInt(0, 1000000));
    //     });
         function functionAlert(msg, myYes) {
            var confirmBox = $("#confirm");
            confirmBox.find(".message").text(msg);
            confirmBox.show();
         }
          function functionhideAlert(msg, myYes) {
            var confirmBox = $("#confirm");
            confirmBox.hide();
         }

         
    function fillit(e) {
        var items = [ 
        '406.0,-2.3122265423262998,1.9519920106415802,-1.6098507322976898,3.9979055875468,-0.522187864667764,-1.4265453192059498,-2.5373873062457903,1.39165724829804,-2.77008927719433,-2.7722721446591496,3.20203320709635,-2.89990738849473,-0.595221881324605,-4.28925378244217,0.38972412027448705,-1.14074717980657,-2.83005567450437,-0.0168224681808257,0.4169557050379071,0.126910559061474,0.517232370861764,-0.0350493686052974,-0.46521107618238794,0.320198198514526,0.0445191674731724,0.177839798284401,0.26114500256767703,-0.143275874698919,0.0',
        '472.0,-3.0435406239976,-3.1573071209022796,1.08846277997285,2.2886436183814,1.35980512966107,-1.06482252298131,0.325574266158614,-0.0677936531906277,-0.270952836226548,-0.838586564582682,-0.41457544828572496,-0.503140859566824,0.6765015446358629,-1.6920289330590599,2.00063483909015,0.6667796959019661,0.599717413841732,1.7253210074551397,0.283344830149495,2.10233879259444,0.661695924845707,0.435477208966341,1.3759657425430603,-0.29380315273402097,0.279798031841214,-0.145361714815161,-0.252773122530705,0.0357642251788156,529.0',
        '4462.0,-2.3033495675855296,1.7592474602669999,-0.35974474333005196,2.33024305053917,-0.8216283283754221,-0.0757875706194599,0.562319782266954,-0.399146578487216,-0.23825336766174599,-1.52541162656194,2.03291215755072,-6.56012429505962,0.0229373234890961,-1.47010153611197,-0.698826068579047,-2.2821938285625096,-4.78183085597533,-2.61566494476124,-1.33444106667307,-0.43002186717161106,-0.294166317554753,-0.9323910572749909,0.172726295799422,-0.0873295379700724,-0.15611426465117198,-0.542627889040196,0.0395659889264757,-0.153028796529788,239.93',
        '6986.0,-4.39797444171999,1.3583670283975802,-2.5928442182572997,2.67978696694832,-1.12813094208956,-1.70653638774951,-3.49619729302467,-0.248777743025673,-0.24776789948007996,-4.80163740602813,4.895844223475231,-10.912819319401901,0.18437168583438698,-6.77109672468083,-0.00732618257771211,-7.358083221323461,-12.5984185405511,-5.13154862842983,0.30833394575869105,-0.17160787864795998,0.573574068424352,0.17696771804819503,-0.436206883597401,-0.0535018648884285,0.252405261951833,-0.657487754764504,-0.827135714578603,0.8495733799857679,59.0',
        '7519.0,1.2342350461346798,3.0197404207033998,-4.304596884796649,4.73279513041887,3.62420083055386,-1.35774566315358,1.7134449878723501,-0.496358487073991,-1.28285782036322,-2.44746925511151,2.10134386504854,-4.6096283906446,1.4643776247618798,-6.0793371930800495,-0.3392373727325769,2.58185095378146,6.7393843847833494,3.0424931783041096,-2.72185312222835,0.00906083639534526,-0.37906830709218003,-0.704181032215427,-0.656804756348389,-1.63265295692929,1.4889014483823702,0.5667972734689339,-0.0100162234965625,0.14679273491698802,1.0',
         '0.0,-1.3598071336738,-0.0727811733098497,2.53634673796914,1.37815522427443,-0.33832076994251803,0.462387777762292,0.239598554061257,0.0986979012610507,0.363786969611213,0.0907941719789316,-0.551599533260813,-0.617800855762348,-0.991389847235408,-0.31116935369987897,1.46817697209427,-0.47040052525947795,0.20797124192924202,0.0257905801985591,0.403992960255733,0.251412098239705,-0.018306777944153,0.277837575558899,-0.110473910188767,0.0669280749146731,0.12853935827352803,-0.189114843888824,0.13355837674038698,-0.0210530534538215,149.62',
                      '0.0,1.1918571113148602,0.26615071205963,0.16648011335321,0.448154078460911,0.0600176492822243,-0.0823608088155687,-0.0788029833323113,0.0851016549148104,-0.255425128109186,-0.16697441400461402,1.6127266610547901,1.06523531137287,0.48909501589608,-0.143772296441519,0.635558093258208,0.463917041022171,-0.114804663102346,-0.18336127012399397,-0.14578304132525902,-0.0690831352230203,-0.225775248033138,-0.6386719527718511,0.10128802125323402,-0.33984647552912706,0.167170404418143,0.125894532368176,-0.00898309914322813,0.0147241691924927,2.69',
                      '1.0,-1.35835406159823,-1.3401630747360902,1.77320934263119,0.3797795930343279,-0.503198133318193,1.80049938079263,0.7914609564504219,0.24767578658899103,-1.5146543226058302,0.207642865216696,0.6245014594248951,0.06608368526883099,0.7172927314108309,-0.165945922763554,2.34586494901581,-2.8900831944423104,1.10996937869599,-0.12135931319588801,-2.26185709530414,0.524979725224404,0.247998153469754,0.771679401917229,0.9094122623477191,-0.689280956490685,-0.3276418337352511,-0.139096571514147,-0.0553527940384261,-0.0597518405929204,378.66',
                      '1.0,-0.9662717115720871,-0.185226008082898,1.79299333957872,-0.863291275036453,-0.0103088796030823,1.24720316752486,0.23760893977178,0.377435874652262,-1.38702406270197,-0.0549519224713749,-0.22648726383540102,0.178228225877303,0.507756869957169,-0.28792374549456,-0.631418117709045,-1.0596472454324999,-0.684092786345479,1.96577500349538,-1.2326219700892,-0.208037781160366,-0.108300452035545,0.0052735967825345295,-0.190320518742841,-1.1755753318632098,0.647376034602038,-0.22192884445840697,0.0627228487293033,0.0614576285006353,123.5',
                      '2.0,-1.1582330934952298,0.8777367548484508,1.548717846511,0.40303393395512105,-0.40719337731165295,0.0959214624684256,0.5929407453855451,-0.27053267719228197,0.8177393082352941,0.7530744319763539,-0.8228428779463629,0.53819555014995,1.3458515932154,-1.11966983471731,0.175121130008994,-0.451449182813529,-0.237033239362776,-0.0381947870352842,0.803486924960175,0.40854236039275804,-0.009430697132329191,0.7982784945897099,-0.13745807961906303,0.14126698382476902,-0.20600958761975602,0.502292224181569,0.219422229513348,0.21515314749920603,69.99' ];
        var item = items[Math.floor(Math.random()*items.length)];
        
        
        document.getElementById("features-input").value = item;
        submitToAPI(e)
    }

    function submitToAPI(e) {
        
        e.preventDefault();
        
        
        var features = $("#features-input").val();

        var data = {"instances":[
        {
            "features" : features
        }]};
        
        $.ajax({
            type: "POST",
            url : "https://cn0eq3k7vg.execute-api.us-east-1.amazonaws.com/dev/predict",
            dataType: "json",
            crossDomain: "true",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(data),

            
            success: function (data, status, jqXHR) {
            // clear form and show a success message
            console.log(data);
            //$('#response pre').html( data );
            //alert(data.body);
            var predata = JSON.parse(data.body);	
 
            document.getElementById("label").innerHTML = predata.predictions[0].predicted_label;
            document.getElementById("score").innerHTML = predata.predictions[0].score;
            //document.getElementById('gg1').refresh(getRandomInt(0, 1000000));
            
            gg1.refresh(100*predata.predictions[0].score );
            if (predata.predictions[0].predicted_label == 1) {
                functionAlert();;
            } else { 
                functionhideAlert();
            }
           

            // document.getElementById("contact-form").reset();
            // location.reload();
            },
            error: function () {
            // show an error message
            alert("UnSuccessfull");
            }});
        
}







      </script>




</body>
</html>